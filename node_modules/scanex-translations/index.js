import { extend } from 'scanex-object-extensions';

const DEFAULT_LANGUAGE = 'rus';

class Translations {
    constructor(){
        this._hash = {};
    }    
    setLanguage (lang) {
        this._language = lang;
    }
    getLanguage () {
        return window.language || this._language || DEFAULT_LANGUAGE;
    }
    addText (lang, tran) {        
        this._hash[lang]= extend(this._hash[lang] || {}, tran);
        return this;
    }
    getText (key) {
        if(key && typeof key === 'string') {
            let locale = this._hash[this.getLanguage()];
            if (locale) {
                return key
                    .split('.')
                    .reduce((a, k) => a[k], locale);
            }         
        }
        return null;
    }
}

window.Scanex = window.Scanex || {};
window.Scanex.Translations = window.Scanex.Translations || {};
window.Scanex.translations = window.Scanex.translations || new Translations();

export default window.Scanex.translations;